<?xml version="1.0" encoding="UTF-8"?>
<!--
 Fabric3
 Copyright (c) 2009-2011 Metaform Systems

 Fabric3 integration tests are licensed under the Apache 2.0 license.

-->
<composite xmlns="http://docs.oasis-open.org/ns/opencsa/sca/200912"
           xmlns:sca="http://docs.oasis-open.org/ns/opencsa/sca/200912"
           xmlns:f3="urn:fabric3.org"
           targetNamespace="urn:fabric3.org"
           name="TestComposite"
           autowire="true">

    <component name="TestInputOutputClient">
        <f3:junit class="org.fabric3.binding.file.test.TestInputOutputClient"/>
        <reference name="latchService" target="FileService/LatchService"/>
    </component>

    <component name="TestAdapterClient">
        <f3:junit class="org.fabric3.binding.file.test.TestAdapterClient"/>
        <reference name="latchService" target="AdaptedFileService/LatchService"/>
    </component>


    <component name="FileService">
        <implementation.java class="org.fabric3.binding.file.test.FileServiceImpl"/>
        <service name="FileService">
            <f3:binding.file location="target/drop" error.location="target/droperror"/>
        </service>
        <reference name="output">
            <f3:binding.file location="target/dropoutput"/>
        </reference>
    </component>

    <component name="AdaptedFileService">
        <implementation.java class="org.fabric3.binding.file.test.AdaptedFileServiceImpl"/>
        <service name="AdaptedFileService">
            <f3:binding.file location="target/adapterdrop"
                             pattern="header.*\.xml"
                             error.location="target/adapterdroperror"
                             archive.location="target/adapterarchive"

                             strategy="archive"
                             adapter="org.fabric3.binding.file.test.Adapter"/>
        </service>
    </component>


</composite>
